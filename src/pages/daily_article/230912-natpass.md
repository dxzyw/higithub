<img src="/assets/image/230912-natpass-1.png" style="max-width: 70%; height: auto;">
<small>3.8k star，推荐一款轻量化的远控工具</small>



# natpass：轻量级远程控制工具

在今天的数字化时代，远程控制工具变得越来越重要，无论是用于远程技术支持、服务器管理还是其他远程操作。natpass是一款轻量级的远程控制工具，它提供了强大的功能和安全性，使您能够轻松地远程管理您的计算机和服务器。本文将介绍natpass的功能、部署过程以及如何使用它，帮助您充分了解这个有用的工具。


![](/assets/image/230912-natpass-1.png)


## natpass的功能与特性

natpass提供了一系列功能和特性，使其成为一款强大的远程控制工具。以下是natpass的主要功能和特性：

1. **跨平台支持**：natpass适用于多种操作系统，包括Linux、Windows和macOS，适用于各种计算机和服务器环境。

2. **轻量级高效**：具有较小的内存占用，不会对系统性能造成过大的负担，适用于资源有限的环境。支持多路异步IO技术，提高了远程管理的效率。

![](/assets/image/230912-natpass-2.png)


3. **安全的数据传输**：支持tls加密连接，保护数据传输的安全性，防止数据泄露和窃取。还支持自定义连接密钥，增加连接的安全性。

![](/assets/image/230912-natpass-3.png)


4. **多种远程管理方式**：支持多种远程管理方式，包括web shell、web VNC、powershell等，满足不同的远程操作需求。

![](/assets/image/230912-natpass-4.png)


5. **私有化部署选项**：允许用户在自己的服务器上进行私有化部署，完全掌握数据和隐私的控制权。

![](/assets/image/230912-natpass-5.png)


6. **灵活的部署和配置**：具有简单的部署过程和灵活的配置选项，使用户能够轻松地开始使用natpass。


![](/assets/image/230912-natpass-6.png)


7. **全面的监控和控制**：支持链路和终端会话监控，帮助用户了解连接状态和活动，及时发现和解决问题。

8. **自定义规则配置**：允许用户根据需要进行自定义规则配置，满足特定的远程管理需求。

9. **广泛的用途**：natpass可用于远程技术支持、服务器管理、远程开发、远程维护等各种用途，帮助用户更好地管理和控制计算机和服务器。

这些功能和特性使natpass成为一款功能强大且灵活的远程控制工具，适用于各种远程管理需求，无论是个人用户还是企业用户都可以受益。


## natpass的部署过程

要使用natpass，您需要将其部署到服务器端、受控端和控制端。下面是针对debian系统的部署过程示例：

### 服务器端部署

1. 在服务器上[下载](https://github.com/lwch/natpass/releases)natpass，并将其解压到任意目录。

2. 使用以下命令启动服务器端程序，使用`sudo`以管理员权限运行：

   ```bash
   sudo ./np-svr --conf server.yaml
   ```

3. （可选）如果需要从外部网络访问服务器端，需要开放外网防火墙的默认端口6154。

### 受控端部署

1. 在受控端机器上[下载](https://github.com/lwch/natpass/releases)natpass，并将其解压到任意目录。

2. （可选）修改`remote.yaml`配置文件，将*server*地址设置为服务器端的地址。

3. 使用以下命令启动客户端程序，使用`sudo`以管理员权限运行，并将`whoami`替换为当前用户名：

   ```bash
   sudo ./np-cli --conf remote.yaml --user `whoami`
   ```

### 控制端部署

1. 在本地控制机上[下载](https://github.com/lwch/natpass/releases)natpass，并将其解压到任意目录。

2. （可选）修改`local.yaml`配置文件，将*server*地址设置为服务器端的地址。

3. （可选）修改`rule.d`目录下的规则配置文件，根据需要

进行自定义配置，规则配置方法详见[rule配置方法](rules.md)。

4. 使用以下命令启动客户端程序，使用`sudo`以管理员权限运行：

   ```bash
   sudo ./np-cli --conf local.yaml
   ```

5. 在以上操作成功后，可以在浏览器中通过`local.yaml`中配置的端口号进行访问，默认地址为：

   ```
   http://127.0.0.1:8080
   ```

### 安全连接（可选）

为了增强数据传输的安全性，建议配置tls加密连接。配置方法如下：

1. 修改服务器端的`server.yaml`文件，配置tls相关文件路径，并重启服务。

2. 修改受控端的`remote.yaml`配置，配置ssl相关选项，并重启服务。

3. 修改控制端的`local.yaml`配置，配置ssl相关选项，并重启服务。

### 修改默认连接密钥（可选）

为了增加连接的安全性，您可以修改默认连接密钥。修改方式如下：

1. 使用以下命令生成一个16位随机串：

   ```bash
   tr -dc A-Za-z0-9 < /dev/urandom | dd bs=16 count=1 2>/dev/null && echo
   ```

2. 修改服务器端的`common.yaml`文件，将`secret`设置为新的密钥，并重启服务。

3. 修改受控端的`common.yaml`文件，将`secret`设置为新的密钥，并重启服务。

4. 修改控制端的`common.yaml`文件，将`secret`设置为新的密钥，并重启服务。

### 注册系统服务（可选）

如果需要将natpass注册为系统服务，可以按以下步骤操作：

1. 在命令行中使用`-action install`参数即可将程序注册为系统服务，使用参数`-user`可设置该服务的启动身份。

2. 对于Linux系统，natpass使用systemd管理系统服务，对于Windows系统，可以使用services.msc面板启动或停止服务。

通过这些部署步骤，您可以轻松地配置和启动natpass，以满足不同的远程管理需求，并确保数据传输的安全性和隐私保护。

## 结论

natpass是一款值得注意的轻量级远程控制工具，具有丰富的功能和强大的特性。它不仅可以帮助用户轻松地远程管理计算机和服务器，还提供了高效的资源利用和安全的数据传输。无论是个人用户还是企业用户，都可以从natpass的优势中受益。

如果您正在寻找一款可靠的远程控制工具，不妨考虑使用natpass。通过本文介绍的部署过程，您可以轻松地开始使用natpass，并充分利用其强大的功能。无论是远程技术支持、服务器管理还是其他远程操作，natpass都能够满足您的需求，提高工作效率，保护数据安全。